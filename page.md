**AI 格式化貼上功能設計文檔**

## **1. 功能概述**

AI 格式化貼上功能允許用戶通過自定義熱鍵，自動將粘貼板內容整理成 Notion 支持的 Markdown 格式，並執行粘貼動作。該功能提高了內容遷移的流暢度，減少手動格式調整的負擔。

## **2. 功能流程**

1. **讀取粘貼板內容**
    - 監聽用戶觸發的 **「AI 格式化貼上」熱鍵**（如 `⌘ + ⇧ + V`）。
    - 抓取當前粘貼板中的文本內容。
2. **執行 LLM 格式轉換**
    - 使用 AI 進行內容整理，包括：
        - **標題轉換**：識別標題層級並轉換為 `#` 格式。
        - **段落與換行優化**：修正 Apple Notes 轉移時產生的錯誤換行。
        - **列表整理**：轉換 、、`1.` 為適當的 Markdown 列表。
        - **內聯格式修正**：確保 `*粗體**`、`斜體*`、``程式碼`` 保持正確。
        - **清除多餘空行**：壓縮連續換行，保持內容整潔。
3. **執行粘貼動作**
    - **確保焦點仍在 Notion 或其他編輯器內**。
    - **自動執行 Paste（⌘ + V / Ctrl + V）**，貼上處理後的內容。
4. **顯示 HUD 進度 UI**
    - 避免用戶以為操作無效。
    - 顯示「正在格式化...」並附帶進度指示。
    - 完成後提示「貼上完成 ✅」，1 秒後自動消失。

## **3. 自定義選項**

- **熱鍵可自定義**（預設為 `⌘ + ⇧ + V`）。
- **允許開啟/關閉自動格式化**。
- **支持不同應用場景**（Notion、Obsidian、Evernote 等）。

## **4. 預期價值**

- **極大提升 Notion 內容輸入體驗**。
- **減少手動調整格式的時間成本**。
- **降低開發難度，不需要額外對接 Notion API**。
- **作為 AssisNotiAI 1.0 的核心功能，提高用戶留存率**。

## **5. 未來可能的擴展**

- **支持表格轉換**，自動解析 Notes 或其他文本中的表格格式。
- **提供可視化格式化設定**，允許用戶選擇是否壓縮換行、調整標題層級等。
- **支持更多應用場景**，如 Google Docs、Slack、Jira 等。

**結論：** AI 格式化貼上功能將成為 AssisNotiAI 1.0 的核心體驗之一，確保高效、直覺的內容整理與輸入體驗。